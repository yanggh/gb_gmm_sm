/* Generated by nbec  on Sat May 27 04:19:05 2017
 */
#include <stdlib.h>

#include "nbe_pu_gbe.h"

nbe_pu_gbe *nbe_gbe_new(void) {
    uint32_t extra = 4096;
    uint32_t fixed_size = sizeof(nbe_pu_gbe);
    nbe_pu_gbe *pu = (nbe_pu_gbe*) malloc(fixed_size +extra);
    check_pu_new(pu);
    memset(pu, 0, fixed_size + extra);
    pu->uhd.uid = 1001;
    pu->uhd.type = NBE_STRUCT;
    pu->uhd.packed = 0;
    uint32_t t = 1;
    pu->uhd.endian = ( *((uint8_t*) &t) != 1);
    pu->uhd.tail = fixed_size;
    pu->uhd.avail = extra;
    return pu;
}

void  nbe_gbe_free(nbe_pu_gbe *pu) {
    free(pu);
}
nbe_string nbe_gbe_get_element_name(nbe_pu_gbe *pu) {
   nbe_string nstring; 
   nbe_ptr ptr = pu->element_name;
   nstring.str = ptr.offset == 0 ? 0 : ((uint8_t*)pu) + ptr.offset;
   nstring.len = ptr.len;
   return nstring;
}

void nbe_gbe_set_element_name_post(void *v, nbe_ptr p, int delta) {
   nbe_pu_gbe *pu = (nbe_pu_gbe*) v;
    if (pu->element_desc.offset > p.offset)
       pu->element_desc.offset += delta;
    if (pu->fields.offset > p.offset)
       pu->fields.offset += delta;
}

nbe_string nbe_gbe_get_element_desc(nbe_pu_gbe *pu) {
   nbe_string nstring; 
   nbe_ptr ptr = pu->element_desc;
   nstring.str = ptr.offset == 0 ? 0 : ((uint8_t*)pu) + ptr.offset;
   nstring.len = ptr.len;
   return nstring;
}

void nbe_gbe_set_element_desc_post(void *v, nbe_ptr p, int delta) {
   nbe_pu_gbe *pu = (nbe_pu_gbe*) v;
    if (pu->element_name.offset > p.offset)
       pu->element_name.offset += delta;
    if (pu->fields.offset > p.offset)
       pu->fields.offset += delta;
}

nbe_list *nbe_gbe_get_fields(nbe_pu_gbe *pu) {
   nbe_ptr ptr = pu->fields;
   uint8_t *p = ptr.offset == 0 ? 0 : ((uint8_t*)pu) + ptr.offset;
   return (nbe_list*) p;
}

void nbe_gbe_set_fields_post(void *v, nbe_ptr p, int delta) {
   nbe_pu_gbe *pu = (nbe_pu_gbe*) v;
    if (pu->element_name.offset > p.offset)
       pu->element_name.offset += delta;
    if (pu->element_desc.offset > p.offset)
       pu->element_desc.offset += delta;
}

static nbe_def _pu_def_ = {
                       1001,
                       0,
                       1,
                       0,
                      "gbe",
                       3,
                       {
                          {12, "element_name", 0}
                         ,{12, "element_desc", 0}
                         ,{13, "fields", 0}
                       }
};

nbe_def *nbe_get_pu_def_1001(uint32_t uid);
nbe_def *nbe_get_pu_def_1001(uint32_t uid) {
    nbe_pu_gbe pu;
    uint8_t *p = (uint8_t*) &pu;
    _pu_def_.flds[0].offset = (uint8_t*)&pu.element_name - p;
    _pu_def_.flds[1].offset = (uint8_t*)&pu.element_desc - p;
    _pu_def_.flds[2].offset = (uint8_t*)&pu.fields - p;
    return &_pu_def_;
}

